(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{2127:function(e,t,r){"use strict";r.r(t);r(20);var n=r(0),a=r.n(n),i=r(26),o=r(33),s=r(5);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var u={init:function(e){var t={time:3,initialTime:8,exceptionAreas:[]};return this.each((function(){var r=a()(this);r.data("timeout")||(e&&a.a.extend(t,e),r.data("timeout",{lastEvent:new Date,trueTime:t.time,time:t.initialTime,untouched:!0,inExceptionArea:!1}),r.on("mouseover.timeout",u.mouseMoved),r.on("mouseenter.timeout",u.mouseMoved),a()(t.exceptionAreas).each((function(){r.find(this).live("mouseover.timeout",{parent:r},u.enteredException).live("mouseleave.timeout",{parent:r},u.leftException)})),t.initialTime>0?r.timeout("startTimer"):r.addClass("timeout"))}))},enteredException:function(e){var t=e.data.parent.data("timeout");t.inExceptionArea=!0,e.data.parent.data("timeout",t),e.data.parent.trigger("mouseover")},leftException:function(e){var t=e.data.parent.data("timeout");t.inExceptionArea=!1,e.data.parent.data("timeout",t)},destroy:function(){return this.each((function(){var e=a()(this),t=e.data("timeout");a()(window).off(".timeout"),t.timeout.remove(),e.removeData("timeout")}))},mouseMoved:function(){var e=a()(this),t=e.data("timeout");e.hasClass("timeout")?(e.removeClass("timeout"),e.timeout("startTimer")):t.untouched&&(t.untouched=!1,t.time=t.trueTime),t.lastEvent=new Date,e.data("timeout",t)},startTimer:function(){var e=a()(this),t=e.data("timeout");setTimeout((function t(){var r=e.data("timeout");if(r&&r.lastEvent)if(r.inExceptionArea)setTimeout(t,Math.floor(1e3*r.time));else{var n=new Date,a=Math.floor(1e3*r.time)-(n-r.lastEvent);a>0?setTimeout(t,a+100):e.addClass("timeout")}}),Math.floor(1e3*t.time))}};a.a.fn.timeout=function(e){return u[e]?u[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!==c(e)&&e?void a.a.error("Method "+e+" does not exist on jQuery.timeout"):u.init.apply(this,arguments)},a.a.extend(a.a.expr[":"],{scrollable:function(e){return"scroll"===a()(e).css("overflow")||"scroll"===a()(e).css("overflowX")||"scroll"===a()(e).css("overflowY")||(e.clientHeight<e.scrollHeight&&(-1!==a.a.inArray(a()(e).css("overflowY"),["scroll","auto"])||-1!==a.a.inArray(a()(e).css("overflow"),["scroll","auto"]))||e.clientWidth<e.scrollWidth&&(-1!==a.a.inArray(a()(e).css("overflowX"),["scroll","auto"])||-1!==a.a.inArray(a()(e).css("overflow"),["scroll","auto"])))}}),a.a.fn.makeVisibleInScroll=function(e){var t=null;return"string"==typeof e?t=a()("#"+e):e&&(t=a()(e)),this.each((function(){var e,r=a()(this);e=t||((e=r.parents(":scrollable")).length>0?a()(e[0]):a()(window));var n=r.position().top,i=r.height()+n,o=e.scrollTop(),s=e.height()+o;n<o?e.scrollTop(n):i>s-e.height()/2&&e.scrollTop(n-(e.height()-r.height())/2)}))},a.a.fn.safeOffset=function(){var e,t=this[0],r={top:0,left:0};return t&&t.nodeType?(e=(t.ownerDocument||document).documentElement,a.a.contains(e,t)?a.a.fn.offset.apply(this,arguments):r):r},a.a.fn.setPositionAbsolute=function(e,t,r){return this.each((function(){var n=a()(this),i=a()(this).width(),o=e.safeOffset(),s=e.width(),c=e.height(),u=o.left+s-i+r,l=o.top+c+t;n.css({"z-index":1,position:"absolute",marginLeft:0,marginTop:0,left:u+"px",top:l+"px",width:i}),n.remove().appendTo("body").show()}))},a.a.fn.positionAncestor=function(e){var t=0,r=0;return this.each((function(){var n=a()(this).closest(e);if(n.length&&"static"!==n.css("position")){var i=a()(this),o=i.safeOffset().left-parseInt(i.css("marginLeft"),10),s=i.safeOffset().top-parseInt(i.css("marginTop"),10),c=n.safeOffset().left+parseInt(n.css("borderLeftWidth"),10),u=n.safeOffset().top+parseInt(n.css("borderTopWidth"),10);return t=o-c,r=s-u,!1}})),{left:t,top:r}},a.a.fn.findInclusive=function(e){return this.find("*").addBack().filter(e)},a.a.fn.slideIn=function(e,t,r){return this.animate({width:"show"},e,t,r)},a.a.fn.slideOut=function(e,t,r){return this.animate({width:"hide"},e,t,r)},a.a.expr[":"].Contains=function(e,t,r){return a()(e).text().toUpperCase().indexOf(r[3].toUpperCase())>=0},a.a.fn.scopedFind=function(e){return 0===e.indexOf("#")?a()(e):this.find(e)};var l=r(2),d=r(42),f=r(14),p=i.a.getLogger("pat.ajax"),g=new d.a("ajax");g.addArgument("url",(function(e){return(e.is("a")?e.attr("href"):e.is("form")?e.attr("action"):"").split("#")[0]})),a.a.ajaxSetup({cache:!1});var m={get:function(e){return void 0!==this[e]?this[e]:0},inc:function(e){return this[e]=this.get(e)+1,this.get(e)}},h={name:"ajax",trigger:".pat-ajax",parser:g,init:function(e){return e.off(".pat-ajax"),e.filter("a").on("click.pat-ajax",h.onTriggerEvents),e.filter("form").on("submit.pat-ajax",h.onTriggerEvents).on("click.pat-ajax","[type=submit]",h.onClickSubmit),e.filter(":not(form,a)").each((function(){p.warn("Unsupported element:",this)})),e},destroy:function(e){e.off(".pat-ajax")},onClickSubmit:function(e){var t=a()(e.target).parents("form").first(),r=e.target.name,n=a()(e.target).val(),i={};r&&(i[r]=n),t.data("pat-ajax.clicked-data",i)},onTriggerEvents:function(e){e&&e.preventDefault(),h.request(a()(this))},request:function(e,t){return e.each((function(){h._request(a()(this),t)}))},_request:function(e,t){var r=h.parser.parse(e,t),n=m.inc(r.url),i=e.data("pat-ajax.clicked-data"),o=i?a.a.param(i):"",s={context:e,data:[e.serialize(),o].filter(Boolean).join("&"),url:r.url,method:e.attr("method")?e.attr("method"):"GET"};if(e.is("form")&&e.attr("method")&&"POST"==e.attr("method").toUpperCase()){var c=new FormData(e[0]);for(var u in i)c.append(u,i[u]);s.method="POST",s.data=c,s.cache=!1,s.contentType=!1,s.processData=!1,s.type="POST"}e.removeData("pat-ajax.clicked-data"),p.debug("request:",s,e[0]);var l=a.a.ajax(s);l&&l.done((function(t,a,i){p.debug("success: jqxhr:",i),n===m.get(r.url)&&e.trigger({type:"pat-ajax-success",jqxhr:i})})).fail((function(t,n,a){p.error("load error for "+r.url+":",a,t),e.trigger({type:"pat-ajax-error",jqxhr:t})}))}};f.a.register(h);var v=h,y=r(36);function b(e){return function(e){if(Array.isArray(e))return A(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||k(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==r)return;var n,a,i=[],o=!0,s=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(e){s=!0,a=e}finally{try{o||null==r.return||r.return()}finally{if(s)throw a}}return i}(e,t)||k(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t,r,n,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function w(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){j(i,n,a,o,s,"next",e)}function s(e){j(i,n,a,o,s,"throw",e)}o(void 0)}))}}function T(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=k(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function k(e,t){if(e){if("string"==typeof e)return A(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?A(e,t):void 0}}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var S=i.a.getLogger("pat.inject"),E=new d.a("inject");E.addArgument("default-selector"),E.addArgument("target"),E.addArgument("data-type","html"),E.addArgument("next-href"),E.addArgument("source"),E.addArgument("trigger","default",["default","autoload","autoload-visible","idle"]),E.addArgument("delay"),E.addArgument("confirm","class",["never","always","form-data","class"]),E.addArgument("confirm-message","Are you sure you want to leave this page?"),E.addArgument("hooks",[],["raptor"],!0),E.addArgument("loading-class","injecting"),E.addArgument("executing-class","executing"),E.addArgument("executed-class","executed"),E.addArgument("class"),E.addArgument("history"),E.addArgument("push-marker"),E.addArgument("scroll"),E.addArgument("url");var C={name:"inject",trigger:".raptor-ui .ui-button.pat-inject, a.pat-inject, form.pat-inject, .pat-subform.pat-inject",parser:E,init:function(e,t){var r=this,n=this.extractConfig(e,t);if(n.some((function(e){return"record"===e.history}))&&!("pushState"in history))return e;if(e.data("pat-inject",n),n[0].nextHref&&0===n[0].nextHref.indexOf("#")&&e.is("a")&&a()(n[0].nextHref).length>0)return S.debug("Skipping as next href is anchor, which already exists",n[0].nextHref),e.attr({href:(window.location.href.split("#")[0]||"")+n[0].nextHref});if(n[0].pushMarker&&a()("body").on("push",(function(t,a){S.debug("received push message: "+a),a==n[0].pushMarker&&(S.debug("re-injecting "+a),r.onTrigger({currentTarget:e[0]}))})),n[0].idleTrigger)this._initIdleTrigger(e,n[0].idleTrigger);else switch(n[0].trigger){case"default":n.forEach((function(e){e.delay&&(e.processDelay=e.delay)})),e.is("form")?e.on("submit.pat-inject",this.onTrigger.bind(this)).on("click.pat-inject","[type=submit]",v.onClickSubmit).on("click.pat-inject","[type=submit][formaction], [type=image][formaction]",this.onFormActionSubmit.bind(this)):e.is(".pat-subform")?S.debug("Initializing subform with injection"):e.on("click.pat-inject",this.onTrigger.bind(this));break;case"autoload":if(n[0].delay){var i=Math.random().toString(36);e.attr("data-pat-inject-uid",i);window.setTimeout(function(t){return 0!=a()("[data-pat-inject-uid='"+t+"']").length&&(e.data("pat-inject-autoloaded",!0),r.onTrigger({currentTarget:e[0]}),!0)}.bind(null,i),n[0].delay)}else this.onTrigger({currentTarget:e[0]});break;case"autoload-visible":this._initAutoloadVisible(e,n);break;case"idle":this._initIdleTrigger(e,n[0].delay)}return S.debug("initialised:",e),e},destroy:function(e){return e.off(".pat-inject"),e.data("pat-inject",null),e},onTrigger:function(e){var t=a()(e.currentTarget),r=t.data("pat-inject");t.is("form")&&a()(r).each((function(e,r){r.params=a.a.param(t.serializeArray())})),e.preventDefault&&e.preventDefault(),t.trigger("patterns-inject-triggered"),this.execute(r,t)},onFormActionSubmit:function(e){v.onClickSubmit(e);var t=a()(e.target),r=t.attr("formaction"),n=t.parents(".pat-inject").first(),i={url:r},o=t.closest("[data-pat-inject]"),s=this.extractConfig(o,i);a()(s).each((function(e,t){t.params=a.a.param(n.serializeArray())})),e.preventDefault(),n.trigger("patterns-inject-triggered"),this.execute(s,n)},submitSubform:function(e){var t=e.parents("form"),r=e.data("pat-inject");a()(r).each((function(t,r){r.params=a.a.param(e.serializeArray())}));try{t.trigger("patterns-inject-triggered")}catch(e){S.error("patterns-inject-triggered",e)}this.execute(r,t)},extractConfig:function(e,t){t=a.a.extend({},t);var r=E.parse(e,t,!0);return r.forEach((function(r){r.$context=e,r.url=t.url||r.url||e.attr("href")||e.attr("action")||e.parents("form").attr("action")||"";var n=r.url.split("#");if(r.url=n[0],n.length>2&&S.warn("Ignoring additional source ids:",n.slice(2)),r.defaultSelector||(r.defaultSelector=n[1]&&"#"+n[1]||"body"),r.delay)try{r.delay=o.a.parseTime(r.delay)}catch(e){S.warn("Invalid delay value: ",r.delay),r.delay=null}r.processDelay=0})),r},elementIsDirty:function(e){var t=a.a.map(e.find(":input:not(select)"),(function(e){var t=a()(e).val();return Boolean(t)&&t!==a()(e).attr("placeholder")}));return-1!==a.a.inArray(!0,t)},askForConfirmation:function(e){var t,r=this,n=!1;return l.default.each(e,(function(e){var a=!1;"always"==e.confirm?a=!0:"form-data"===e.confirm?"none"!=e.target&&(a=r.elementIsDirty(e.$target)):"class"===e.confirm&&"none"!=e.target&&(a=e.$target.hasClass("is-dirty")),a&&(n=!0,t=e.confirmMessage)})),!(n&&!window.confirm(t))},ensureTarget:function(e){if("none"===e.target)return!0;if(e.$target=e.$target||("self"===e.target?e.$context:a()(e.target)),0===e.$target.length){if(!e.target)return S.error("Need target selector",e),!1;e.$target=this.createTarget(e.target),e.$injected=e.$target}return!0},verifySingleConfig:function(e,t){return t.url!==e?(S.error("Unsupported different urls for multi-inject"),!1):(t.source=t.source||t.defaultSelector,t.target=t.target||t.defaultSelector,!!this.extractModifiers(t)&&(!!this.ensureTarget(t)&&(this.listenForFormReset(t),!0)))},verifyConfig:function(e){return e.every(l.default.partial(this.verifySingleConfig.bind(this),e[0].url))},listenForFormReset:function(e){if("none"!==e.target){var t=e.$target.parents("form");0!==t.length&&void 0===e.$target.data("initial-value")&&(e.$target.data("initial-value",e.$target.html()),t.on("reset",(function(){e.$target.html(e.$target.data("initial-value"))})))}},extractModifiers:function(e){var t=/^(.*?)(::element)?$/.exec(e.source),r=/^(.*?)(::element)?(::after|::before)?$/.exec(e.target);e.source=t[1],e.sourceMod=t[2]?"element":"content",e.target=r[1];var n=r[2]?"element":"content",a=(r[3]||"::").slice(2);return e.loadingClass&&(e.loadingClass+=" "+e.loadingClass+"-"+n,a&&e.loadingClass&&(e.loadingClass+=" "+e.loadingClass+"-"+a)),e.action=n+a,!0},createTarget:function(e){if("#"!==e.slice(0,1))return S.error("only id supported for non-existing target"),null;var t=a()("<div />").attr({id:e.slice(1)});return a()("body").append(t),t},stopBubblingFromRemovedElement:function(e,t,r){var n,a=T(t);try{for(a.s();!(n=a.n()).done;){var i=n.value.target;if(e.parents(i).addBack(i)&&!r.isPropagationStopped())return void r.stopPropagation()}}catch(e){a.e(e)}finally{a.f()}},_performInjection:function(e,t,r,n,i,o){var s;"content"===n.sourceMod&&(r=r.contents()),(s=document.all&&document.querySelector&&!document.addEventListener?r.map((function(e,t){return a()(t.outerHTML)[0]})):r.safeClone()).findInclusive("img").on("load",(function(e){a()(e.currentTarget).trigger("pat-inject-content-loaded")}));var c=n.$injected||s;this._inject(i,s,a()(e),n)&&this._afterInjection(t,c,n);var u=n.url.indexOf("?")>-1?"&":"?";"record"===n.history&&"pushState"in history&&(n.params?history.pushState({url:n.url+u+n.params},"",n.url+u+n.params):history.pushState({url:n.url},"",n.url),o&&this._inject(i,o,a()("title"),{action:"element"}))},_afterInjection:function(e,t,r){if(t.filter((function(e,t){return 3!==t.nodeType})).data("pat-injected",{origin:r.url}),1===t.length&&3==t[0].nodeType?t.parent().trigger("patterns-injected",[r,e[0],t[0]]):t.each((function(t,n){3!==n.nodeType&&a()(n).addClass(r.class).trigger("patterns-injected",[r,e[0],n])})),r.scroll&&"none"!==r.scroll){var n=r.$target.parents().addBack().filter(":scrollable");n=n.length?n[0]:window;var i=0,s=0;if("top"!==r.scroll){var c="target"===r.scroll?r.$target[0]:t.filter(r.scroll)[0],u=n===window?document.body:n;s=Math.abs(c.getBoundingClientRect().left+u.scrollLeft-u.getBoundingClientRect().left-o.a.getCSSValue(u,"border-left-width",!0)),i=Math.abs(c.getBoundingClientRect().top+u.scrollTop-u.getBoundingClientRect().top-o.a.getCSSValue(u,"border-top-width",!0))}n===window?n.scrollTo(s,i):(n.scrollLeft=s,n.scrollTop=i)}e.trigger("pat-inject-success")},_onInjectSuccess:function(e,t,r){var n=this;return w(regeneratorRuntime.mark((function i(){var o,s,c;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(o=r&&r.jqxhr&&r.jqxhr.responseText){i.next=4;break}return S.warn("No response content, aborting",r),i.abrupt("return");case 4:return"none"===t[0].source&&(o=""),a.a.each(t[0].hooks||[],(function(t,r){return e.trigger("pat-inject-hook-"+r)})),n.stopBubblingFromRemovedElement(e,t,r),i.next=9,n.callTypeHandler(t[0].dataType,"sources",e,[t,o,r]);case 9:(s=i.sent)&&s[s.length-1]&&s[s.length-1][0]&&"TITLE"==s[s.length-1][0].nodeName&&(c=s[s.length-1]),t.forEach((function(t,a){var i=function(){"none"!=t.target&&t.$target.each((function(i,o){n._performInjection(o,e,s[a],t,r.target,c)}))};t.processDelay?setTimeout((function(){return i()}),t.processDelay):i()})),t[0].nextHref&&e.is("a")&&(e.attr({href:t[0].nextHref.replace(/&amp;/g,"&")}),n.destroy(e)),e.off("pat-ajax-success.pat-inject"),e.off("pat-ajax-error.pat-inject");case 15:case"end":return i.stop()}}),i)})))()},_onInjectError:function(e,t,r){return w(regeneratorRuntime.mark((function n(){var i,o,s,c,u,l,d,f,p;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o="",c=r.jqxhr.status,u=new Date,c%100==4?o="Sorry! We couldn't find the page to load. Please make a screenshot and send it to support. Thank you!":c%100==5?o="I am very sorry! There was an error at the server. Please make a screenshot and contact support. Thank you!":0==c&&(o="It seems, the server is down. Please make a screenshot and contact support. Thank you!"),l=new URLSearchParams(window.location.search),!(d=null===(i=document.querySelector("meta[name=pat-inject-status-".concat(c,"]")))||void 0===i?void 0:i.getAttribute("content",!1))||null!==l.get("pat-inject-errorhandler.off")){n.next=20;break}return n.prev=7,n.next=10,fetch(d,{method:"GET"});case 10:return f=n.sent,s=document.createElement("html"),n.next=14,f.text();case 14:s.innerHTML=n.sent,s=s.querySelector("body"),n.next=20;break;case 18:n.prev=18,n.t0=n.catch(7);case 20:t.forEach((function(e){"$injected"in e&&e.$injected.remove()})),e.off("pat-ajax-success.pat-inject"),e.off("pat-ajax-error.pat-inject"),s?document.body.innerHTML=s.innerHTML:(p=s||"".concat(o," Status is ").concat(c," ").concat(r.jqxhr.statusText,", time was ").concat(u,". You can click to close this."),a()("body").attr("data-error-message",p),a()("body").on("click",(function(){a()("body").removeAttr("data-error-message"),window.location.href=window.location.href})));case 24:case"end":return n.stop()}}),n,null,[[7,18]])})))()},execute:function(e,t){e=e.map((function(e){return a.a.extend({},e)})),this.verifyConfig(e)&&this.askForConfirmation(e)&&(t.data("pat-inject-triggered")||(t.data("pat-inject-triggered",!0),l.default.chain(e).filter(l.default.property("loadingClass")).each((function(e){"none"!=e.target&&e.$target.addClass(e.loadingClass)})),l.default.chain(e).filter(l.default.property("loadingClass")).each((function(e){return t.addClass(e.executingClass)})),t.on("pat-ajax-success.pat-inject",this._onInjectSuccess.bind(this,t,e)),t.on("pat-ajax-error.pat-inject",this._onInjectError.bind(this,t,e)),t.on("pat-ajax-success.pat-inject pat-ajax-error.pat-inject",(function(){return t.removeData("pat-inject-triggered")})),e[0].url.length?v.request(t,{url:e[0].url}):t.trigger({type:"pat-ajax-success",jqxhr:{responseText:a()("body").html()}})))},_inject:function(e,t,r,n){var i={contentbefore:"prepend",contentafter:"append",elementbefore:"before",elementafter:"after"}[n.action];return"none"===n.source?(r.replaceWith(""),!0):0===t.length?(S.warn("Aborting injection, source not found:",t),a()(e).trigger("pat-inject-missingSource",{url:n.url,selector:n.source}),!1):"none"===n.target||(0===r.length?(S.warn("Aborting injection, target not found:",r),a()(e).trigger("pat-inject-missingTarget",{selector:n.target}),!1):("content"===n.action?r.empty().append(t):"element"===n.action?r.replaceWith(t):r[i](t),!0))},_sourcesFromHtml:function(e,t,r){var n=this._parseRawHtml(e,t);return r.map((function(e){if("body"===e&&(e="#__original_body"),"none"===e)return a()("\x3c!-- --\x3e");var r=n.find(e);return 0===r.length&&"title"!=e&&S.warn("No source elements for selector:",e,n),r.find('a[href^="#"]').each((function(e,n){var a=n.getAttribute("href");-1===a.indexOf("#{1}")&&(1===a.length?n.href=t:r.find(a).length||(n.href=t+a))})),r}))},_rebaseAttrs:{A:"href",FORM:"action",IMG:"data-pat-inject-rebase-src",OBJECT:"data",SOURCE:"data-pat-inject-rebase-src",VIDEO:"data-pat-inject-rebase-src"},_rebaseOptions:{calendar:["url","event-sources"],collapsible:["load-content"],"date-picker":["i18n"],"datetime-picker":["i18n"],inject:["url"]},_rebaseHTML:function(e,t){var r=this;if(""===t)return"";var n=a()(t.replace(/(\s)(src\s*)=/gi,'$1src="" data-pat-inject-rebase-$2=').trim()).wrapAll("<div>").parent();n.find(Object.keys(this._rebaseAttrs).join(",")).each((function(t,n){var i=a()(n),s=r._rebaseAttrs[n.tagName],c=i.attr(s);c&&"@@"!==c.slice(0,2)&&"#"!==c[0]&&"mailto:"!==c.slice(0,7)&&"tel:"!==c.slice(0,4)&&"fax:"!==c.slice(0,4)&&"callto:"!==c.slice(0,7)&&"ts3server:"!==c.slice(0,10)&&"teams:"!==c.slice(0,6)&&"javascript:"!==c.slice(0,11)&&(c=o.a.rebaseURL(e,c),i.attr(s,c))}));for(var i=0,s=Object.entries(this._rebaseOptions);i<s.length;i++){var c,u=x(s[i],2),l=u[0],d=u[1],p=T(y.a.querySelectorAllAndMe(n[0],"[data-pat-".concat(l,"]")));try{for(p.s();!(c=p.n()).done;){var g=c.value,m=g.getAttribute("data-pat-".concat(l),!1);if(m){var h=f.a.patterns[l],v=null==h?void 0:h.parser;if(!v)continue;var b,j=v._parse(m),w=!1,k=T(d);try{for(k.s();!(b=k.n()).done;){var A=b.value,S=j[A];S&&(w=!0,Array.isArray(S)?j[A]=S.map((function(t){return o.a.rebaseURL(e,t)})):j[A]=o.a.rebaseURL(e,S))}}catch(e){k.e(e)}finally{k.f()}w&&g.setAttribute("data-pat-".concat(l),JSON.stringify(j))}}}catch(e){p.e(e)}finally{p.f()}}return n.find("[data-pat-inject-rebase-src]").each((function(e,t){var r=a()(t);r.attr("src",r.attr("data-pat-inject-rebase-src")).removeAttr("data-pat-inject-rebase-src")})),n.html().replace(/src="" data-pat-inject-rebase-/g,"").trim()},_parseRawHtml:function(e,t){t=t||"";var r=e.match(/\<title\>(.*)\<\/title\>/),n=e.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"").replace(/<head\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/head>/gi,"").replace(/<body([^>]*?)>/gi,'<div id="__original_body">').replace(/<\/body([^>]*?)>/gi,"</div>");r&&2==r.length&&(n=r[0]+n);try{n=this._rebaseHTML(t,n)}catch(e){S.error("Error rebasing urls",e)}var i=a()("<div/>").html(n);return 0===i.children().length&&S.warn("Parsing html resulted in empty jquery object:",n),i},_initAutoloadVisible:function(e,t){var r=this;if(e.data("pat-inject-autoloaded"))return!1;var n=e.parents(":scrollable"),i=function(t){return!e.data("pat-inject-autoloaded")&&(e.data("pat-inject-autoloaded",!0),r.onTrigger({currentTarget:e[0]}),t&&t.preventDefault(),!0)};if(e.click(i),n.length){var s=o.a.debounce((function(){if(e.data("patterns.autoload")||!a.a.contains(document,e[0]))return!1;if(!e.is(":visible"))return!1;var r=(e.data("pat-inject")[0].target||t[0].defaultSelector).replace(/::element/,"");return(!r||"self"===r||0!==a()(r).length)&&(!!(e.safeOffset().top-n.safeOffset().top-1e3<=n.innerHeight())&&(a()(n[0]).off("scroll",s),a()(window).off("resize.pat-autoload",s),i()))}),100);if(s())return!0;a()(n[0]).on("scroll",s),a()(window).on("resize.pat-autoload",s)}else{var c=o.a.debounce((function(){if(e.parents(":scrollable").length)return a()(window).off(".pat-autoload",c),r._initAutoloadVisible(e);if(e.data("patterns.autoload"))return!1;if(!e.is(":visible"))return!1;if(!o.a.elementInViewport(e[0]))return!1;var n=(e.data("pat-inject")[0].target||t[0].defaultSelector).replace(/::element/,"");return(!n||"self"===n||0!==a()(n).length)&&(a()(window).off(".pat-autoload",c),i())}),100);if(c())return!0;if(IntersectionObserver){var u=new IntersectionObserver(c);e.each((function(e,t){return u.observe(t)}))}else a()(window).on("resize.pat-autoload scroll.pat-autoload",c)}return!1},_initIdleTrigger:function(e,t){var r,n=this,a=parseInt(t,10),i=function(){n.onTrigger({currentTarget:e[0]}),c(),clearTimeout(r)},s=o.a.debounce((function(){document.body.contains(e[0])?(clearTimeout(r),r=setTimeout(i,a)):c()}),a),c=function(){["scroll","resize"].forEach((function(e){return window.removeEventListener(e,s)})),["click","keypress","keyup","mousemove","touchstart","touchend"].forEach((function(e){return document.removeEventListener(e,s)}))};s(),["scroll","resize"].forEach((function(e){return window.addEventListener(e,s)})),["click","keypress","keyup","mousemove","touchstart","touchend"].forEach((function(e){return document.addEventListener(e,s)}))},registerTypeHandler:function(e,t){this.handlers[e]=t},callTypeHandler:function(e,t,r,n){var i=this;return w(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e=e||"html",!i.handlers[e]||!a.a.isFunction(i.handlers[e][t])){r.next=7;break}return r.next=4,i.handlers[e][t].bind(i).apply(void 0,b(n));case 4:return r.abrupt("return",r.sent);case 7:return r.abrupt("return",null);case 8:case"end":return r.stop()}}),r)})))()},handlers:{html:{sources:function(e,t){var r=e.map((function(e){return e.source}));return r.push("title"),this._sourcesFromHtml(t,e[0].url,r)}}}};if(a()(document).on("patterns-injected.inject",(function(e,t,r,n){t&&t.skipPatInjectHandler||(t&&(t.$target.removeClass(t.loadingClass),a()(r).removeClass(t.executingClass).addClass(t.executedClass)),3!==n.nodeType&&8!==n&&(f.a.scan(n,null,{type:"injection",element:r}),a()(n).trigger("patterns-injected-scanned")))})),a()(window).on("popstate",(function(e){if(e.originalEvent.state||!("replaceState"in history))window.location.reload();else try{history.replaceState("anchor","",document.location.href)}catch(e){S.debug(e)}})),"replaceState"in history)try{history.replaceState("pageload","",document.location.href)}catch(e){S.debug(e)}f.a.register(C);var I=C;function $(e,t,r,n,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function _(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){$(i,n,a,o,s,"next",e)}function s(e){$(i,n,a,o,s,"throw",e)}o(void 0)}))}}var R=i.a.getLogger("pat.markdown"),L=/\.md$/,O=s.a.extend({name:"markdown",trigger:".pat-markdown",init:function(){var e=this;return _(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.$el.is(e.trigger)){t.next=6;break}return r=e.$el.is(":input")?e.$el.val():e.$el.text(),t.next=4,e.render(r);case 4:t.sent.replaceAll(e.$el);case 6:case"end":return t.stop()}}),t)})))()},render:function(e){return _(regeneratorRuntime.mark((function t(){var n,i,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.e(223).then(r.t.bind(null,2126,7));case 2:return(n=t.sent.default).extensions.prettify=function(){return[{type:"output",filter:function(e){return e.replace(/(<pre>)?<code>/gi,(function(e,t){return t?'<pre class="pat-syntax-highlight" tabIndex="0"><code data-inner="1">':'<code class="pat-syntax-highlight">'}))}}]},i=a()("<div/>"),o=new n.Converter({tables:!0,extensions:["prettify"]}),i.html(o.makeHtml(e)),t.abrupt("return",i);case 8:case"end":return t.stop()}}),t)})))()},renderForInjection:function(e,t){var r=this;return _(regeneratorRuntime.mark((function n(){var i,o,s;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=t,!e.source||null===(i=/^#+\s*(.*)/.exec(e.source))){n.next=7;break}if(null!==(o=r.extractSection(o,i[1]))){n.next=6;break}return R.warn('Could not find section "'+e.source+'" in '+e.url),n.abrupt("return",a()("<div/>").attr("data-src",e.url));case 6:o+="\n";case 7:return n.next=9,r.render(o);case 9:return s=n.sent,n.abrupt("return",s.attr("data-src",e.source?e.url+e.source:e.url));case 11:case"end":return n.stop()}}),n)})))()},extractSection:function(e,t){var r,n;t=o.a.escapeRegExp(t);var a=new RegExp("^((#+)\\s*@TEXT@\\s*|@TEXT@\\s*\\n([=-])+\\s*)$".replace(/@TEXT@/g,t),"m"),i=a.exec(e);if(null===i)return null;if(i[2])n=i[2].length,r=(r="^#{@LEVEL@}\\s*@TEXT@\\s*$\\n+((?:.|\\n)*?(?=^#{1,@LEVEL@}\\s)|.*(?:.|\\n)*)").replace(/@LEVEL@/g,n);else{if(!i[3])return R.error("Unexpected section match result",i),null;r="="===i[3]?"^@TEXT@\\s*\\n=+\\s*\\n+((?:.|\\n)*?(?=^.*?\\n=+\\s*$)|(?:.|\\n)*)":"^@TEXT@\\s*\\n-+\\s*\\n+((?:.|\\n)*?(?=^.*?\\n[-=]+\\s*$)|(?:.|\\n)*)"}return r=r.replace(/@TEXT@/g,t),null===(i=(a=new RegExp(r,"m")).exec(e))&&R.error("Failed to find section with known present header?"),null!==i?i[0]:null}});a()(document).ready((function(){a()(document.body).on("patterns-inject-triggered.pat-markdown","a.pat-inject",(function(){a()(this).data("pat-inject").forEach((function(e){L.test(e.url)&&(e.dataType="markdown")}))}))})),I.registerTypeHandler("markdown",{sources:function(e,t){return _(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Promise.all(e.map(function(){var e=_(regeneratorRuntime.mark((function e(r){var n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=O.init(r.$target),e.next=3,n.renderForInjection(r,t);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))()}});t.default=O}}]);