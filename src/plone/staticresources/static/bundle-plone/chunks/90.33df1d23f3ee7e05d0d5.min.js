(window.webpackJsonp=window.webpackJsonp||[]).push([[90],{332:function(t,n){!function(){"use strict";var t,n,e,o,r=tinymce.util.Tools.resolve("tinymce.PluginManager"),i=function(){return(i=Object.assign||function(t){for(var n,e=1,o=arguments.length;e<o;e++)for(var r in n=arguments[e])Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t}).apply(this,arguments)},a=function(t){var n=t;return{get:function(){return n},set:function(t){n=t}}},u=Object.prototype.hasOwnProperty,c=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];if(0===n.length)throw new Error("Can't merge zero objects");for(var o={},r=0;r<n.length;r++){var i=n[r];for(var a in i)u.call(i,a)&&(o[a]=t(o[a],i[a]))}return o},l=function(t){return function(){return t}},s=l(!(t=function(t,n){return n})),f=l(!0),m=function(){return g},g=(n=function(t){return t.isNone()},{fold:function(t,n){return t()},is:s,isSome:s,isNone:f,getOr:o=function(t){return t},getOrThunk:e=function(t){return t()},getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:l(null),getOrUndefined:l(void 0),or:o,orThunk:e,map:m,each:function(){},bind:m,exists:s,forall:f,filter:m,equals:n,equals_:n,toArray:function(){return[]},toString:l("none()")}),d=function(t){var n=l(t),e=function(){return r},o=function(n){return n(t)},r={fold:function(n,e){return e(t)},is:function(n){return t===n},isSome:f,isNone:s,getOr:n,getOrThunk:n,getOrDie:n,getOrNull:n,getOrUndefined:n,or:e,orThunk:e,map:function(n){return d(n(t))},each:function(n){n(t)},bind:o,exists:o,forall:o,filter:function(n){return n(t)?r:g},toArray:function(){return[t]},toString:function(){return"some("+t+")"},equals:function(n){return n.is(t)},equals_:function(n,e){return n.fold(s,(function(n){return e(t,n)}))}};return r},h={some:d,none:m,from:function(t){return null==t?g:d(t)}},v=Object.keys,p=Object.hasOwnProperty,y=function(t,n){for(var e=v(t),o=0,r=e.length;o<r;o++){var i=e[o];n(t[i],i)}},b=function(t,n){return-1!==t.indexOf(n)},w=tinymce.util.Tools.resolve("tinymce.Resource"),O=tinymce.util.Tools.resolve("tinymce.util.Delay"),k=tinymce.util.Tools.resolve("tinymce.util.Promise"),C="All",j={symbols:"Symbols",people:"People",animals_and_nature:"Animals and Nature",food_and_drink:"Food and Drink",activity:"Activity",travel_and_places:"Travel and Places",objects:"Objects",flags:"Flags",user:"User Defined"},_=function(t,n){return e=t,o=n,p.call(e,o)?t[n]:n;var e,o},A=function(t){var n,e=t.getParam("emoticons_append",{},"object");return n=function(t){return i({keywords:[],category:"user"},t)},function(t,n){var e={};return y(t,(function(t,o){var r=n(t,o);e[r.k]=r.v})),e}(e,(function(t,e){return{k:e,v:n(t)}}))},T=function(t,n,e){var o=a(h.none()),r=a(h.none()),i=t.getParam("emoticons_images_url","https://twemoji.maxcdn.com/v/13.0.1/72x72/","string"),u=function(t){var n={},e=[];y(t,(function(t,o){var r,a,u,c,l={title:o,keywords:t.keywords,char:(a=(r=t).char,0,c="<img",(u=a).length>=c.length&&u.substr(0,0+c.length)===c?r.char.replace(/src="([^"]+)"/,(function(t,n){return'src="'+i+n+'"'})):r.char),category:_(j,t.category)},s=void 0!==n[l.category]?n[l.category]:[];n[l.category]=s.concat([l]),e.push(l)})),o.set(h.some(n)),r.set(h.some(e))};t.on("init",(function(){w.load(e,n).then((function(n){var e=A(t);u(c(n,e))}),(function(t){console.log("Failed to load emoticons: "+t),o.set(h.some({})),r.set(h.some([]))}))}));var l=function(){return r.get().getOr([])},s=function(){return o.get().isSome()&&r.get().isSome()};return{listCategories:function(){return[C].concat(v(o.get().getOr({})))},hasLoaded:s,waitForLoad:function(){return s()?k.resolve(!0):new k((function(t,e){var o=15,r=O.setInterval((function(){s()?(O.clearInterval(r),t(!0)):--o<0&&(console.log("Could not load emojis from url: "+n),O.clearInterval(r),e(!1))}),100)}))},listAll:l,listCategory:function(t){return t===C?l():o.get().bind((function(n){return h.from(n[t])})).getOr([])}}},P=function(t,n,e){for(var o=[],r=n.toLowerCase(),i=e.fold((function(){return s}),(function(t){return function(n){return t<=n}})),a=0;a<t.length&&(0!==n.length&&!function(t,n){return b(t.title.toLowerCase(),n)||function(t,n){for(var e=0,o=t.length;e<o;e++)if(n(t[e]))return!0;return!1}(t.keywords,(function(t){return b(t.toLowerCase(),n)}))}(t[a],r)||(o.push({value:t[a].char,text:t[a].title,icon:t[a].char}),!i(o.length)));a++);return o},x="pattern",D=function(t,n){var e,o,r={pattern:"",results:P(n.listAll(),"",h.some(300))},i=a(C),u=(e=function(t){var e,o,r,a,u;o=(e=t).getData(),r=i.get(),a=n.listCategory(r),u=P(a,o[x],r===C?h.some(300):h.none()),e.setData({results:u})},200,o=null,{cancel:function(){null!==o&&(clearTimeout(o),o=null)},throttle:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];null!==o&&clearTimeout(o),o=setTimeout((function(){e.apply(null,t),o=null}),200)}}),c={label:"Search",type:"input",name:x},l={type:"collection",name:"results"},s=function(){return{title:"Emoticons",size:"normal",body:{type:"tabpanel",tabs:function(t,n){for(var e=t.length,o=new Array(e),r=0;r<e;r++){var i=t[r];o[r]=n(i)}return o}(n.listCategories(),(function(t){return{title:t,name:t,items:[c,l]}}))},initialData:r,onTabChange:function(t,n){i.set(n.newTabName),u.throttle(t)},onChange:u.throttle,onAction:function(n,e){var o,r;"results"===e.name&&(o=t,r=e.value,o.insertContent(r),n.close())},buttons:[{type:"cancel",text:"Close",primary:!0}]}},f=t.windowManager.open(s());f.focus(x),n.hasLoaded()||(f.block("Loading emoticons..."),n.waitForLoad().then((function(){f.redial(s()),u.throttle(f),f.focus(x),f.unblock()})).catch((function(t){f.redial({title:"Emoticons",body:{type:"panel",items:[{type:"alertbanner",level:"error",icon:"warning",text:"<p>Could not load emoticons</p>"}]},buttons:[{type:"cancel",text:"Close",primary:!0}],initialData:{pattern:"",results:[]}}),f.focus(x),f.unblock()})))};r.add("emoticons",(function(t,n){var e,o,r,i,a,u,c,l,s,f=(o=n,r=(e=t).getParam("emoticons_database","emojis","string"),e.getParam("emoticons_database_url",o+"/js/"+r+e.suffix+".js","string")),m=t.getParam("emoticons_database_id","tinymce.plugins.emoticons","string"),g=T(t,f,m);a=g,u=function(){return D(i,a)},(i=t).ui.registry.addButton("emoticons",{tooltip:"Emoticons",icon:"emoji",onAction:u}),i.ui.registry.addMenuItem("emoticons",{text:"Emoticons...",icon:"emoji",onAction:u}),l=g,(c=t).ui.registry.addAutocompleter("emoticons",{ch:":",columns:"auto",minChars:2,fetch:function(t,n){return l.waitForLoad().then((function(){var e=l.listAll();return P(e,t,h.some(n))}))},onAction:function(t,n,e){c.selection.setRng(n),c.insertContent(e),t.hide()}}),(s=t).on("PreInit",(function(){s.parser.addAttributeFilter("data-emoticon",(function(t){!function(t,n){for(var e=0,o=t.length;e<o;e++)n(t[e])}(t,(function(t){t.attr("data-mce-resize","false"),t.attr("data-mce-placeholder","1")}))}))}))}))}()}}]);